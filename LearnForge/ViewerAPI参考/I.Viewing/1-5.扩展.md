# Extension

### new Extension(viewer, options)

用于扩展查看器功能的类。

从此类派生并实现方法load()和unload()。

通过调用以下地址注册此扩展程序：Autodesk.Viewing.theExtensionManager.registerExtension('your_extension_id',YOUR_EXTENSION_CLASS);

通过将扩展ID添加到传递给查看器构造函数的config对象中，可以自动注册和加载扩展。

<font color=gray size=4>**参数**</font>

Term|Definition
:-:|:-:|
viewer<font color=red size=2>\*</font>&nbsp;<font color=gray size=2>*Autodesk.Viewing.Viewer3D*</font>|Viewer要扩展。
options<font color=red size=2>\*</font>&nbsp;<font color=gray size=2>*object*</font>|此扩展程序的可选选项字典。

<font color=red size=2>\*</font><font color=red size=2>必填</font>

## Methods

### load()

Override the load method to add functionality to the viewer. Use the Viewer’s APIs to add/modify/replace/delete UI, register event listeners, etc.
覆盖load方法以向查看器添加功能。使用查看器的API添加/修改/替换/删除UI，注册事件侦听器等。

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
boolean, Promise|如果加载成功，则为true。可选地，该函数可以返回Promise，该Promise在加载成功时解决，并在失败的情况下拒绝。

### unload()

覆盖unload方法以执行对在加载中完成的操作的一些清理。

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
boolean|如果卸载成功，则为true。

### activate(mode)

覆盖activate方法以启用扩展功能。

<font color=gray size=4>**参数**</font>

Term|Definition
:-:|:-:|
mode|可选模式，指示扩展功能的运行方式不同。

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
boolean|如果扩展名激活成功，则为true。

### deactivate()

覆盖deactivate方法以禁用扩展功能。

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
boolean|如果扩展名停用成功，则为true。

### getName()

获取扩展名。

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
string|返回扩展名。

### getModes()

获取可用于扩展的模式数组。

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
Array|返回模式数组。

### isActive(mode)

检查扩展是否处于活动状态，还可以选择检查该扩展的指定模式是否处于活动状态。

<font color=gray size=4>**参数**</font>

Term|Definition
:-:|:-:|
mode<font color=red size=2>\*</font>|可选模式，指示扩展功能的运行方式不同。

<font color=red size=2>\*</font><font color=red size=2>必填</font>

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
boolean|默认值-如果扩展名是激活的，则为true。当指定了可选参数mode时，如果扩展名和模式都处于激活状态，则返回true，否则为false。

### getState(viewerState)

获取扩展状态为纯对象。旨在在请求查看器状态时调用。

<font color=gray size=4>**参数**</font>

Term|Definition
:-:|:-:|
viewerState<font color=red size=2>\*</font>&nbsp;<font color=gray size=2>*object*</font>|注入扩展值的对象。

<font color=red size=2>\*</font><font color=red size=2>必填</font>

### restoreState(viewerState, immediate)

从给定的对象恢复扩展状态。

<font color=gray size=4>**参数**</font>

Term|Definition
:-:|:-:|
viewerState<font color=red size=2>\*</font>&nbsp;<font color=gray size=2>*object*</font>|查看者状态。
immediate<font color=red size=2>\*</font>&nbsp;<font color=gray size=2>*boolean*</font>|新视图是应用(true)还是不应用(false)。

<font color=red size=2>\*</font><font color=red size=2>必填</font>

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
boolean|如果还原操作成功，则为true。

### extendLocalization(locales)

将本地化字符串添加到查看器。此方法可以覆盖已经加载的本地化密钥。没有API方法可以删除此方法添加的本地化字符串。

<font color=gray size=4>**参数**</font>

Term|Definition
:-:|:-:|
locales<font color=red size=2>\*</font>&nbsp;<font color=gray size=2>*object*</font>|由语言键入的本地化字符串集

<font color=red size=2>\*</font><font color=red size=2>必填</font>

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
boolean|如果本地化已成功更新，则为true。

<font color=gray size=4>**例子**</font>

```js
var locales = {
  en: { my_tooltip: "CUSTOM_TOOLTIP" },
  de: { my_tooltip: "BENUTZERDEFINIERTE_TOOLTIP" }
};
ext.extendLocalization(locales);
```

----

### getCache()

返回在扩展程序的unload-> load操作序列中始终存在的对象。缓存对象由Autodesk.Viewing.Viewer3D实例保留。缓存对象仅存在于RAM中，没有localStorage持久性。

<font color=gray size=4>**Returns**</font>

type(类型)|description(描述)
:-:|:-:|
object|给定扩展名的缓存对象。

### onToolbarCreated(toolbar)

创建工具栏UI后调用。扩展可以从此刻开始扩展（或删除）其内容。触发TOOLBAR_​​CREATED_EVENT后调用该方法。如果已经创建了工具栏，也会在Autodesk.Viewing.Extension＃load之后立即调用它。

必须被子类覆盖。

<font color=gray size=4>**参数**</font>

Term|Definition
:-:|:-:|
toolbar<font color=red size=2>\*</font>&nbsp;<font color=gray size=2>*Autodesk.Viewing.UI.ToolBar*</font>|工具栏实例。

<font color=red size=2>\*</font><font color=red size=2>必填</font>
